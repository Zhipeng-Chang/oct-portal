webpackJsonp([1],{"4+hh":function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("7+uW"),n={name:"app",mounted:function(){var e=this;C.$on("initialize-ideas",function(t){t.route&&e.$router.push(t.route)})}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app-ideas"}},[t("router-view")],1)},staticRenderFns:[]},s=i("VU/8")(n,r,!1,function(e){i("cShR")},null,null).exports,o=i("/ocq"),d=i("mtWM"),l=i.n(d),c=l.a.create({baseURL:"https://octportal.edmonton.ca:5000/Ideas",headers:{AuthorizationEncrypted:"true"}});c.setUserInfo=function(e){l.a.defaults.headers.common.Authorization="Bearer "+(e||{}).auth},c.setIdeaApi=function(e){e?c.baseURL=e:l.a.defaults.baseURL="https://octportal.edmonton.ca:5000/Ideas"};var u=c,f=i("ESwS"),m=i("+cKO"),v={name:"NewIdea",mixins:[f.validationMixin],data:function(){return{sending:!1,form:{title:null,description:null,tags:[]}}},validations:{form:{title:{required:m.required,minLength:Object(m.minLength)(3),maxLength:Object(m.maxLength)(255)},description:{required:m.required,minLength:Object(m.minLength)(3)}}},methods:{getValidationClass:function(e){var t=this.$v.form[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},clearForm:function(){this.$v.$reset(),this.form.title=null,this.form.description=null,this.form.tags=[]},saveIdea:function(){var e=this;this.sending=!0,console.log("saving new idea"),u.post("",{title:this.form.title,description:this.form.description}).then(function(t){console.log("new idea saved!"),e.sending=!1;var i=t.data;i&&i.url&&i.url.length>0&&(window.location.href=i.url)}).catch(function(t,i){e.sending=!1,console.debug(t),console.debug(i)})},validateIdea:function(){this.$v.$touch(),this.$v.$invalid||this.saveIdea()}}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("form",{staticClass:"md-layout-row md-gutter",attrs:{novalidate:""}},[i("md-card-content",[i("div",{staticClass:"md-layout-row md-layout-wrap md-gutter"},[i("div",{staticClass:"md-flex md-flex-small-100"},[i("md-field",{class:e.getValidationClass("title")},[i("label",{attrs:{for:"idea-title"}},[e._v("What is your technology initiative?")]),e._v(" "),i("md-input",{attrs:{name:"title",id:"idea-title"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),e._v(" "),e.$v.form.title.required?e.$v.form.title.minlength?e._e():i("span",{staticClass:"md-error"},[e._v("Invalid title")]):i("span",{staticClass:"md-error"},[e._v("Title is required")])],1)],1),e._v(" "),i("div",{staticClass:"md-flex md-flex-small-100"},[i("md-field",{class:e.getValidationClass("description")},[i("label",{attrs:{for:"idea-desc"}},[e._v("Description")]),e._v(" "),i("md-textarea",{attrs:{name:"description",id:"idea-desc"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._v(" "),e.$v.form.description.required?e.$v.form.description.minlength?e._e():i("span",{staticClass:"md-error"},[e._v("Invalid Description")]):i("span",{staticClass:"md-error"},[e._v("Description is required")])],1)],1),e._v(" "),i("md-chips",{attrs:{name:"tags",id:"idea-tags","md-placeholder":"Add tag..."},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}})],1)]),e._v(" "),e.sending?i("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e(),e._v(" "),i("md-card-actions",[i("button",{staticClass:"et_pb_button",attrs:{type:"submit",disabled:e.sending},on:{click:function(t){t.preventDefault(),e.saveIdea(t)}}},[e._v("Submit")])])],1)])},staticRenderFns:[]},p=i("VU/8")(v,h,!1,function(e){i("Y4TS")},"data-v-2984719a",null).exports,g=new Date("0001-01-01T00:00:00.000Z"),_={name:"ViewIdeas",data:function(){return{ideas:[],errors:[]}},created:function(){var e=this;this.ideas.splice(0,this.ideas.length),u.get("").then(function(t){e.ideas=t.data}).catch(function(t){e.errors.push(t)})},methods:{formatIdeaDescription:function(e){var t=e.description;return t&&t.length>140?t.substring(0,140)+"...":t},formatDate:function(e){var t=new Date,i=new Date(e.createdDate);if(i.getTime()===g.getTime())return"";if(i>t)return console.log("idea is was created in the future!"),console.log(e),"";var a=Math.abs(i.getTime()-t.getTime())/1e3;if(a<60)return Math.floor(a)+" secs ago";var n=a/60;if(1===n)return"1 min ago";if(n<60)return Math.floor(n)+" mins ago";var r=n/24;if(1===r)return"1 hour ago";if(r<24)return Math.floor(r)+" hours ago";var s=r/24;if(1===s)return"1 day ago";if(s<365)return Math.floor(s)+" days ago";var o=s/365;return 1===o?"1 year ago":Math.floor(o)+" years ago"}}},w={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.ideas&&e.ideas.length?i("div",e._l(e.ideas,function(t){return i("div",{key:t.id,staticClass:"summary"},[i("h3",[i("a",{attrs:{href:t.url}},[e._v(e._s(t.title))])]),e._v(" "),i("div",{staticClass:"ideaDetails"},[e._v("\n        "+e._s(e.formatIdeaDescription(t))+"\n      ")]),e._v(" "),i("div",{staticClass:"started"},[e._v("\n        "+e._s(e.formatDate(t))+" by "+e._s(t.stakeholders[0].userName)+"\n      ")]),e._v(" "),i("hr",{staticClass:"separator"})])})):e._e()])},staticRenderFns:[]},b=i("VU/8")(_,w,!1,function(e){i("gSi2")},"data-v-40ad0c76",null).exports;a.default.use(o.a);var I=new o.a({routes:[{path:"/",name:"NewIdea",component:p},{path:"/ViewIdeas",name:"ViewIdeas",component:b}]}),$=i("Lgyv"),y=i.n($);i("4+hh"),i("VLml");i.d(t,"bus",function(){return C}),a.default.config.productionTip=!1,a.default.use(y.a);var C=new a.default,x=new a.default({el:"#coe-idea-new",router:I,template:"<AppIdeas/>",components:{AppIdeas:s},methods:{initialize:function(e){e.userInfo&&u.setUserInfo(e.userInfo),e.ideaApi&&u.setIdeaApi(e.ideaApi),C.$emit("initialize-ideas",e)}}}),D=window.coe;D||(D={},window.coe=D);var L=D.ideas;L||(L={},D.ideas=L),L.app=x},VLml:function(e,t){},Y4TS:function(e,t){},cShR:function(e,t){},gSi2:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6b213cfb7bc8a04fbf24.js.map